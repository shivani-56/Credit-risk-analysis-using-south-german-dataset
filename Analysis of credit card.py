{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "f8dc6761",
   "metadata": {},
   "outputs": [],
   "source": [
    "from pandas_profiling import ProfileReport\n",
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import warnings\n",
    "get_ipython().run_line_magic('matplotlib', 'inline')\n",
    "\n",
    "\n",
    "pd.set_option('display.max_columns',None)\n",
    "warnings.filterwarnings(action='ignore',message='^internal gelsd')\n",
    "\n",
    "\n",
    "df = pd.read_csv(r\"C:\\Users\\Lenovo\\PycharmProjects\\GermanBankCreditCard\\SouthGermanCredit\\SouthGermanCredit.asc\",sep=' ')\n",
    "df\n",
    "\n",
    "\n",
    "df=df.rename(columns={'laufkont':'status', 'laufzeit':'duration', 'moral':'credit_history', 'verw':'purpose', \n",
    "                      'hoehe':'amount', 'sparkont':'savings', 'beszeit':'employment_duration', 'rate':'installment_rate',\n",
    "                      'famges':'personal_status_sex', 'buerge':'other_debtors', 'wohnzeit':'present_residence',\n",
    "                      'verm':'property', 'alter':'age', 'weitkred':'other_installment_plans', 'wohn':'housing',\n",
    "                      'bishkred':'number_credits', 'beruf':'job', 'pers':'people_liable', 'telef':'telephone',\n",
    "                      'gastarb':'foreign_worker', 'kredit':'credit_risk'})\n",
    "\n",
    "\n",
    "df.info()\n",
    "\n",
    "\n",
    "numerical_feature = [feature for feature in df.columns if df[feature].dtypes != \"O\"]\n",
    "\n",
    "\n",
    "print('Number of Numerical Feature :', len(numerical_feature))\n",
    "\n",
    "\n",
    "for feature in numerical_feature:\n",
    "    print('The feature is {} and number of categories are {}'.format(feature,len(df[feature].unique())))\n",
    "\n",
    "\n",
    "discrete_variable=[feature for feature in numerical_feature if len(df[feature].unique())<9]\n",
    "\n",
    "\n",
    "print('Discrete Variable Feature : {}'.format(len(discrete_variable)))\n",
    "\n",
    "\n",
    "continous_variable=[feature for feature in numerical_feature if feature not in df[discrete_variable]]\n",
    "\n",
    "\n",
    "print('Continous Variable Feature : {}'.format(len(continous_variable)))\n",
    "\n",
    "\n",
    "df.isnull().sum()\n",
    "\n",
    "\n",
    "sns.set_theme(style='darkgrid')\n",
    "sns.countplot(x='credit_risk',data=df)\n",
    "\n",
    "\n",
    "sns.set_theme(style='darkgrid')\n",
    "sns.countplot(x='foreign_worker',hue='credit_risk',data=df)\n",
    "\n",
    "\n",
    "sns.set_theme(style='darkgrid')\n",
    "sns.countplot(x='credit_risk',hue='purpose',data=df)\n",
    "\n",
    "\n",
    "plt.hist(x='amount',bins=30,data=df)\n",
    "\n",
    "\n",
    "df[df['credit_risk']==0]\n",
    "\n",
    "\n",
    "plt.hist(data=df[df['credit_risk']==0],x='amount')\n",
    "plt.title('Bad Loans Amount Histogram')\n",
    "\n",
    "\n",
    "max(df[df['credit_risk']==0]['amount'])\n",
    "\n",
    "plt.figure(figsize=(25,25),facecolor='white')\n",
    "plotnumber = 1\n",
    "\n",
    "for i in discrete_variable:\n",
    "    # There Are 17 Feature In Discrete Variable\n",
    "    if plotnumber <= 17:\n",
    "        ax = plt.subplot(5,4,plotnumber)\n",
    "        sns.countplot(x=i,data=df[discrete_variable])\n",
    "        plt.xlabel(i,fontsize=20)\n",
    "    plotnumber += 1\n",
    "plt.show()\n",
    "\n",
    "\n",
    "plt.figure(figsize=(10,10))\n",
    "plotnumber = 1\n",
    "\n",
    "for i in continous_variable:\n",
    "    # There Are 4 Feature In Continous Variable\n",
    "    if plotnumber <= 4:\n",
    "        ax = plt.subplot(2,2,plotnumber)\n",
    "        sns.histplot(x=i,data=df[continous_variable])\n",
    "        plt.xlabel(i,fontsize=20)\n",
    "    plotnumber += 1\n",
    "plt.show()\n",
    "\n",
    "\n",
    "df.to_csv(r'C:\\Users\\Lenovo\\PycharmProjects\\GermanBankCreditCard\\SouthGermanCredit\\Preprocess.csv')"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.8"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
